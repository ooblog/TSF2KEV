<html lang="ja"><head>
 <meta charset="UTF-8" />
 <title>「TSF2KEV」はプログラミング言語「TSF_Tab-Separated-Forth」のD言語とPythonによる実装です。</title>
 <link rel="stylesheet" type="text/css" href="TSFdoc.css" />
 <link rel="icon" type="image/png" href="TSF2KEV_icon.png" />
</head><body>
 <header><nav>
  <div class="yonmoji_root"><a href="https://ooblog.github.io/" rel="publisher" title="「約四文字」(http://ooblog.github.io/)">約四<br /></a><a href="https://ooblog.github.io/" rel="publisher" title="「約四文字」(http://ooblog.github.io/)">文字</a></div>
  <span> &#62; <a href="https://ooblog.github.io/TSF.html" title="TSV - 「約四文字」(http://ooblog.github.io/)">TSF</a> &#62; <mark class="applogo"><img src="TSF2KEV_icon.png" width="48" height="48" alt="TSF2KEV" title="TSF2KEV"></mark></span> <span class="yonmoji_sitemap"><a href="https://ooblog.github.io/404.html" title="404 - 「約四文字」(http://ooblog.github.io/)">「約四文字」のsitemap(404)</a></span>
  <br class="yonmoji_both" />
 </div></header>
 <aside class="sidepages"><nav>
  <ul>
   <li><a href="index.html"><img src="TSF2KEV_icon.png" width="48" height="48" alt="TSF2KEV" title="TSF2KEV"></a></li>
   <li><a href="TSFdoc.html"><img src="TSFdoc_icon.png" width="48" height="48" alt="TSFdoc" title="TSFdoc"></a></li>
   <li><a href="KEV2.html"><img src="KEV2_icon.png" width="48" height="48" alt="KEV2" title="KEV2"></a></li>
  </ul>
  <p>
   <a href="404.html" title="404">「TSF2KEV」のsitemap(404)</a>
  </p>
 </nav></aside>
 <section class="mainpages">
  <h1>「TSF2KEV」はプログラミング言語「TSF_Tab-Separated-Forth」のD言語とPythonによる実装です。</h1>
  <p>
   version(branch):20170528U134416	modify:20170619M014237(執筆途中です)<br>
  </p>  <ul>
   <li><a href="#License-0" title="⓪-0．ライセンスの解説など">⓪-0．ライセンスの解説など</a></li>
   <li><a href="#License-1" title="⓪-1．動作環境">⓪-1．動作環境</a></li>
   <li><a href="#License-2" title="⓪-2．インストール/アンインストール＆セットアップ">⓪-2．インストール/アンインストール＆セットアップ</a></li>
   <li><a href="#License-3" title="⓪-3．その他現在わかっている不具合や今後の課題などソフト使用の補足ガイドライン">⓪-3．その他現在わかっている不具合や今後の課題などソフト使用の補足ガイドライン</a></li>
   <li><a href="#grammar-0" title="①-0．TSFとForthとの差異(ワードをカードと呼ぶ)など。">①-0．TSFとForthとの差異(ワードをカードと呼ぶ)など。</a></li>
   <li><a href="#grammar-1" title="①-1．TSF構文には括弧が存在しません(式では括弧が使えます)。">①-1．TSF構文には括弧が存在しません(式では括弧が使えます)。</a></li>
   <li><a href="#grammar-2" title="①-2．TSFには変数の型どころか代入したり束縛したりするような変数自体が存在しません。">①-2．TSFには変数の型どころか代入したり束縛したりするような変数自体が存在しません。</a></li>
   <li><a href="#grammar-3" title="①-3．TSFには関数の返り値やreturn文が存在しません。return用にタプルを用意するなどの概念もありません。">①-3．TSFには関数の返り値やreturn文が存在しません。return用にタプルを用意するなどの概念もありません。</a></li>
   <li><a href="#grammar-4" title="①-4．TSFにはtry/catch文が存在しません。ゼロで割った場合などの時は「n|0」が発生します。">①-4．TSFにはtry/catch文が存在しません。ゼロで割った場合などの時は「n|0」が発生します。</a></li>
   <li><a href="#grammar-5" title="①-5．TSFにはfor文やwhile文が無いので再帰がループです。">①-5．TSFにはfor文やwhile文が無いので再帰がループです。</a></li>
   <li><a href="#grammar-6" title="①-6．TSFにはif/else文やswitch/case文が無いので分岐は式(比較演算子)などを用います。">①-6．TSFにはif/else文やswitch/case文が無いので分岐は式(比較演算子)などを用います。</a></li>
   <li><a href="#grammar-7" title="①-7．スタック代名詞4つの「th」this,that,the,theyとハウリングについて。">①-7．スタック代名詞4つの「th」this,that,the,theyとハウリングについて。</a></li>
   <li><a href="#grammar-8" title="①-8．カードシャッフル動詞4つの「p」peek,poke,pull,pushとドロー＆リターンについて。">①-8．カードシャッフル動詞4つの「p」peek,poke,pull,pushとドロー＆リターンについて。</a></li>
   <li><a href="#grammar-9" title="①-9．カード選択位置の副詞「FNCMVAQIRHL」と数量詞「SDO」ついて。">①-9．カード選択位置の副詞「FNCMVAQIRHL」と数量詞「SDO」ついて。</a></li>
   <li><a href="#api-0" title="②-0．「TSF.d」「TSF.py」のAPI一覧(コマンド一覧含む)。">②-0．「TSF.d」「TSF.py」のAPI一覧(コマンド一覧含む)。</a></li>
   <li>②-1．「TSF --help」「sample/sample_help.tsf」コマンド一覧表示。</li>
   <li>②-2．「TSF --helloworld」「sample/sample_helloworld.tsf」TSFのハローワールドサンプル。</li>
   <li>③-0．「TSF_Io.d」「TSF_Io.py」のAPI一覧<。/li>
   <li>③-1．「TSF_Io.d」「TSF_Io.py」のRPN電卓の解説。</li>
   <li>④-0．「TSF_Forth.d」「TSF_Forth.py」の#関数カード一覧。</li>
   <li>④-1．「TSF_Forth.d」「TSF_Forth.py」のAPI一覧。</li>
   <li>⑤-0．「TSF_Shuffle.d」「TSF_Shuffle.py」の#関数カード一覧。</li>
   <li>⑤-1．「TSF_Shuffle.d」「TSF_Shuffle.py」のAPI一覧。</li>
   <li>⑥-0．「TSF_Calc.d」「TSF_Calc.py」の#関数カード一覧。</li>
   <li>⑥-1．「TSF_Calc.d」「TSF_Calc.py」のAPI一覧。</li>
   <li>⑥-2．「TSF_Time.d」「TSF_Time.py」の電卓フォーマットの解説。</li>
   <li>⑦-0．「TSF_Time.d」「TSF_Time.py」の#関数カード一覧。</li>
   <li>⑦-1．「TSF_Time.d」「TSF_Time.py」のAPI一覧。</li>
   <li>⑦-2．「TSF_Time.d」「TSF_Time.py」の日時フォーマットの解説。</li>
   <li>⑧-0．「TSF_Urlpath.d」「TSF_Urlpath.py」の#関数カード一覧。</li>
   <li>⑧-1．「TSF_Urlpath.d」「TSF_Urlpath.py」のAPI一覧。</li>
   <li>⑨-0．「TSF_Match.d」「TSF_Match.py」の#関数カード一覧。</li>
   <li>⑨-1．「TSF_Match.d」「TSF_Match.py」のAPI一覧。</li>
   <li>⑩-0．「TSF_Trans.d」「TSF_Urlpath.py」の#関数カード一覧。</li>
   <li>⑩-1．「TSF_Trans.d」「TSF_Urlpath.py」のAPI一覧。</li>
   <li>⑪-0．「TSF」のＦＡＱ。</li>
   <li><a href="#address-0" title="⑫-0．作者について、例えば連絡先。">⑫-0．作者について、例えば連絡先。</a></li>
  </ul>
 </section>
 <section>
  <h2 id="License-0">⓪-0．ライセンスの解説など</h2>
   <p>※「MIT License」準拠。<br></p>
   <dl><dt>MIT License - Choose a License</dt><dd><a href="http://choosealicense.com/licenses/mit/" title="MIT License - Choose a License">http://choosealicense.com/licenses/mit/</a></dd></dl>
   <dl><dt>licenses/MIT_license - Open Source Group Japan Wiki - Open Source Group Japan - OSDN</dt><dd><a href="https://ja.osdn.net/projects/opensource/wiki/licenses%2FMIT_license" title="licenses/MIT_license - Open Source Group Japan Wiki - Open Source Group Japan - OSDN">https://ja.osdn.net/projects/opensource/wiki/licenses%2FMIT_license</a></dd></dl>
   <dl><dt>MITライセンスを1行1行読んでいく | プログラミング | POSTD</dt><dd><a href="http://postd.cc/mit-license-line-by-line/" title="MITライセンスを1行1行読んでいく | プログラミング | POSTD">http://postd.cc/mit-license-line-by-line/</a></dd></dl>
 </section>
 <section>
  <h2 id="License-0">⓪-1．動作環境</h2>
  <p>
  「Tahrpup6.0.5,Python2.7.6,dmd2.074.0,vim.gtk7.4.52(vim-gtk)」および<br>
  「Wine1.7.18,Python3.4.4,dmd2.074.0,gvim8.0.134(KaoriYa)」で開発中。<br> 
  </p>
  <p>
   ※D言語もしくはPythonがインストールされているものとします(Linuxの場合Python2系が最初から入ってる場合があります)。<br>
  </p>
  <dl><dt>Downloads - D Programming Language</dt><dd><a href="http://choosealicense.com/licenses/mit/" title="Downloads - D Programming Language">https://dlang.org/download.html</a></dd></dl>
  <dl><dt>Python Release Python 3.4.4 | Python.org</dt><dd><a href="https://www.python.org/downloads/release/python-344/" title="Python Release Python 3.4.4 | Python.org">https://www.python.org/downloads/release/python-344/</a></dd></dl>
  <p>
   ※Puppy Linux以外のOSでも動作すると思いますが開発環境関連リンクも併記。<br>
  </p>
  <dl><dt>Puppy Linux Home</dt><dd><a href="http://puppylinux.com/" title="Puppy Linux Home">http://puppylinux.com/</a></dd></dl>
  <dl><dt>Portable Wine</dt><dd><a href="http://shinobar.server-on.net/puppy/opt/wine-portable-HELP_ja.html" title="Portable Wine">http://shinobar.server-on.net/puppy/opt/wine-portable-HELP_ja.html</a></dd></dl>
 </section>
 <section>
  <h2 id="License-2">⓪-2．インストール/アンインストール＆セットアップ</h2>
   <p>
    gitでリポジトリ「https://github.com/ooblog/TSF2KEV.git」を「Clone」するか、<br>
    「https://github.com/ooblog/TSF2KEV/archive/master.zip」を「Download ZIP」して展開すると、<br>
    「TSF2KEV」フォルダが作成されます。<br>
   </p>
   <dl><dt>プログラミング言語「TSF_Tab-Separated-Forth」開発中。</dt><dd><a href="https://github.com/ooblog/TSF2KEV" title="プログラミング言語「TSF_Tab-Separated-Forth」開発中。">https://github.com/ooblog/TSF2KEV</a></dd></dl>
   <p>
    VimでTSFを編集する場合は「<a href="https://github.com/ooblog/TSF2KEV/blob/master/vimsyntax/tsf.vim" title="TSF2KEV/tsf.vim at master · ooblog/TSF2KEV">vimsyntax/tsf.vim</a>」を「~/.vim/syntax/tsf.vim」にコピー。<br>
    VimでKEVを用いた漢直入力などをする場合は「メニュー→編集(E)→起動時の設定(S)」で「&#126;/.vimrc」を開いて「filetype=tsf」や「:!TSF %」を追記。<br>
   </p>
   <pre><code>
   syntax on
   au BufRead,BufNewFile *.tsf set filetype=tsf
   autocmd BufNewFile,BufRead *.tsf nnoremap &lt;F5&gt; :!TSF %&lt;CR&gt;
   command KEV2tsf  :source &#126;/TSF2KEV/KEV2/kanedit.vim
   </code></pre>
  <p>
   Vimエディタでの設定が成功するとシンタックスが着色されるはずです。<br>
   <img src="TSF_512x384.png" alt="TSF syntax image" title="TSFのシンタックス" width="512" height="384"><br>
  </p>
  <p>
   D言語の環境が用意できる場合「<a href="https://github.com/ooblog/TSF2KEV/blob/master/TSF_DMDcompile.sh" title="TSF2KEV/TSF_DMDcompile.sh at master · ooblog/TSF2KEV">TSF_DMDcompile.sh</a>」のように「TSF」の実行バイナリがコンパイルできます。<br>
  </p>
   <pre><code>
   dmd TSF.d TSF_Io.d TSF_Forth.d TSF_Shuffle.d TSF_Calc.d TSF_Time.d TSF_Urlpath.d TSF_Match.d TSF_Trans.d
   </code></pre>
  <p>
   実行バイナリ「TSF」を環境変数「$PATH」が通るフォルダ(例えばPuppyLinuxの場合「/root/my-applications/bin/TSF」など)にコピーするとLinuxの場合「*.tsf」が実行できるようになるはずです。<br>
  </p>
  <dl><dt>env - Wikipedia</dt><dd><a href="https://ja.wikipedia.org/wiki/Env" title="env - Wikipedia">https://ja.wikipedia.org/wiki/Env</a></dd></dl>
  <dl><dt>シバン (Unix) - Wikipedia</dt><dd><a href="https://ja.wikipedia.org/wiki/%E3%82%B7%E3%83%90%E3%83%B3_(Unix)" title="シバン (Unix) - Wikipedia">https://ja.wikipedia.org/wiki/%E3%82%B7%E3%83%90%E3%83%B3_(Unix)</a></dd></dl>
 </section>
 <section>
  <h2 id="License-3">⓪-3．その他現在わかっている不具合や今後の課題などソフト使用の補足ガイドライン</h2>
  <p>
   未実装の#関数カードや#関数カード内の未実装な機能などが存在します。<br>
  </p>
  <ul>
   <li>「#TSF_calender」でISO週番号や徹夜日時などが未実装。「TSF_Time」モジュールでタイマー系が未実装。</li>
   <li>「TSF_Calc」モジュールで分数の小数変換機能細かい版が未実装(RPN経由で高速に近似を求める事は可能)。</li>
   <li>「TSF_Shuffle」モジュールPPPP関連で「C」「V」「A」「Q」「I」「R」「H」「L」副詞が未実装。</li>
   <li>「TSF_Match」モジュールで「C」「V」「R」副詞が未実装。「count」動詞が未実装。</li>
  </ul>
  <p>
   言語仕様が固まってない＆特にTSF_Matchモジュールで愚直にすべての関数を作ると時間がかかりすぎる＆kan5x5.woffフォントも未完成。なので、フレーバーテキスト風に#関数カードの仕様が書かれたカード画像を数を揃えて用意する演出は頓挫。<br>
  </p>
 </section>
 <section>
  <h2 id="grammar-0">①-0．TSFとForthとの差異(ワードをカードと呼ぶ)など。</h2>
  <p>
   <img src="cardimg/TSF176x250.png" width="176" height="250" class="TSFcard" alt="「TSF_Tab-Separated-Forth」カードサイズロゴ" title="「TSF_Tab-Separated-Forth」カードサイズロゴ">
   ForthやTSVのおさらいはwikipediaなどを軽く参考にしてください。<br>
  </p>
  <dl><dt>Forth - Wikipedia</dt><dd><a href="https://ja.wikipedia.org/wiki/Forth" title="Forth - Wikipedia">https://ja.wikipedia.org/wiki/Forth</a></dd></dl>
  <dl><dt>逆ポーランド記法 - Wikipedia</dt><dd><a href="https://ja.wikipedia.org/wiki/%E9%80%86%E3%83%9D%E3%83%BC%E3%83%A9%E3%83%B3%E3%83%89%E8%A8%98%E6%B3%95" title="逆ポーランド記法 - Wikipedia">https://ja.wikipedia.org/wiki/%E9%80%86%E3%83%9D%E3%83%BC%E3%83%A9%E3%83%B3%E3%83%89%E8%A8%98%E6%B3%95</a></dd></dl>
  <dl><dt>Gforth マニュアル</dt><dd><a href="http://www.h7.dion.ne.jp/~samwyn/forth/gforth/index.html" title="Gforth マニュアル">http://www.h7.dion.ne.jp/~samwyn/forth/gforth/index.html</a></dd></dl>
  <dl><dt>Comma-Separated Values - Wikipedia</dt><dd><a href="https://ja.wikipedia.org/wiki/Comma-Separated_Values" title="Comma-Separated Values - Wikipedia">https://ja.wikipedia.org/wiki/Comma-Separated_Values</a></dd></dl>
  <dl><dt>Labeled Tab-separated Values (LTSV)</dt><dd><a href="http://ltsv.org/" title="Labeled Tab-separated Values (LTSV)">http://ltsv.org/</a></dd></dl>
  <p>
   TSVにプログラムを搭載(Value→Forth)できるようにしたものがTSFです。<br>
   TSFはForthも参考にしてますが「csv→tsv→ltsv(HSP)→L:Tsv(BaCon,Python)→TSF(D言語,Python)」みたいな流れなので、<br>
   間接的にはHSPやPythonの影響を受けてるはずですが、厳密にはプログラミング言語からではなくデータフォーマットからの進化です。<br>
  </p>
  <p>
   Forthでは関数をワードとして定義しますが、TSFにはワードの概念がありません。TSFでは文字列や関数を「カード」と呼称します。<br>
   カードの束をスタックとして管理し、スタックの集合をデッキと呼称します。<br>
   #関数カードそのものを作る機能はありません。「#TSF_this」によるスタック呼び出しが関数(組み込みではないワード)呼び出しに該当します。<br>
  </p>
 </section>
 <section>
  <h2 id="grammar-1">①-1．TSF構文には括弧が存在しません(式では括弧が使えます)。</h2>
  <p>
   <img src="cardimg/TSFcard_shebang.png" width="176" height="250" class="TSFcard" alt="「#! /usr/bin/env TSF」カード" title="「#! /usr/bin/env TSF」カード">
   TSF構文で用いる記号はタブ文字「\t」による区切りと「#!」によるコメントと、スタック名末尾「:」と関数カード先頭の「#」ぐらいです。
  </p>
  <dl><dt>「\t(tab)」</dt><dd>カード(文字列)はタブ文字で区切るので、タブ文字を視認しやすいエディタを用いてください。<br></dd></dl>
  <dl><dt>
   「#!(shebang)」</dt><dd>インタプリタ指定「#! /usr/bin/env TSF」を成立させるためにシバン「#!」で始まる行はコメント扱いにして読み飛ばします。<br>
   転じて「#!exit:」のような存在しないスタック名を表現する場合にも使用します。<br>
  </dd></dl>
  <dl><dt>「:(coron)」</dt><dd>スタック名に必須ではありませんが「#TSF_calc」内でスタック名を扱う際に必要。あとLTSVを読み込む「L」副詞で用いる予定。<br></dd></dl>
  <dl><dt>「#(sharp)」</dt><dd>関数カード名にシャープは必須ではありませんが視認性の関係(スタック名との区別)でTSFの関数には頭にシャープ(ハッシュ)を付けてます。<br></dd></dl>
  <p>
   行頭がシバン「#!」の場合はコメント扱いです。<br>
   行頭がタブ文字「\t」の場合はスタックを構成するカード束です。<br>
   行頭がタブ文字「\t」でもシバン「#!」でもない場合はスタック名の宣言です。スタック名宣言とスタック構成カード束とをまとまて一行で記述(ワンライナー)する事も可能です。<br>
   行頭がシャープ「#」すなわちシャープ付きのスタック名は非推奨ですが、漢直関連でシャープ一文字のスタック名「#」を必要とするので禁止はされてません(#関数カードとの衝突には注意)。<br>
  </p>
  <p>
   つまりコメントを除くとTSF構文にはタブ区切りと改行しか存在しないので、構文としての括弧はありません。<br>
   TSF構文そのものに括弧はありませんが、#関数カード「#TSF_calc」内の演算で括弧が使えます(「#TSF_RPN」はRPNなので括弧を使いません)。<br>
  </p>
 </section>
 <section>
  <h2 id="grammar-2">①-2．TSFには変数の型どころか代入したり束縛したりするような変数自体が存在しません。</h2>
  <p>
   TSFは文字列リストを格納する連想配列(デッキ)でメモリを管理する形になるので、整数も小数も分数もbool値も文字列(カード)になります。<br>
   #関数カード(「#TSF_calc」「#TSF_RPN」など)の演算結果をthatスタックに積み上げるそれを変数に代入と呼ぶかは微妙です。<br>
   「#TSF_calc」でスタックをリスト(配列)に見立てる場合には「#TSF_join[]」を経由せずに式に組み込む事は可能です。<br>
  </p>
  <p>
   スタックを変数に「喩える」ならば、全てがグローバル変数みたいなものなので、衝突のデメリットとどこからでも呼び出せるメリットがあります。<br>
   いわゆるenumやconstやimmutableに該当する束縛系の機能もない(なぜなら変数が存在しない)ので、スタック名の衝突には注意。<br>
  </p>
 </section>
 <section>
  <h2 id="grammar-3">①-3．TSFには関数の返り値やreturn文が存在しません。return用にタプルを用意するなどの概念もありません。</h2>
  <p>
   複数の値を受けとるために構造体やタプル型やクラスなどを用意する必要はありません。変数が存在しないように関数にも帰り値が存在しません。<br>
   #関数カードやスタックは値を文字列カードとしてthatスタックに積む(場合がある)だけです(便宜上「リターン」と呼称します)。<br>
   #関数カードが複数の値をリターンする場合や複数の値をドローする場合、個数が付加されてる場合もあります(「#TSF_argvsthe #TSF_echoN」を組み合わせるケースなど)。<br>
  </p>
 </section>
 <section>
  <h2 id="grammar-4">①-4．TSFにはtry/catch文が存在しません。ゼロで割った場合などの時は「n|0」が発生します。</h2>
  <p>
   関数に帰り値が無いのだから、関数内でエラーが発生した場合エラーコードがthatスタックに積まれるのかと言えば、そんな事もありません。<br>
   TSFの実装ミスか何かでD言語やPythonレベルのエラーは起こりうると思いますが、TSFの#関数カード自体にエラーコードの概念は基本的にはありません。<br>
   例えば「#TSF_readtext」でファイルの読込に失敗しても、文字列長0のファイルを読み込んだ扱いになります。<br>
   「#TSF_calc」や「#TSF_RPN」でゼロで割るような事が発生した場合、「n|0」が「リターン」されるだけです。「n|0」の解釈は#関数カード毎の判断によります。<br>
   例えば「n|0」を「#TSF_echoN」に渡す場合、0行出力の扱いになりますが、「n|0」をゼロとみなしてるのではなく「数値ではない」と判断された流れです。<br>
   thisスタックを数え終わるまたはスタック破棄および「#TSF_countmax」で指定した上限(初期値256)などのオーバーフロー発生は単にスタックの終了扱いになるのでスタックを抜けます。<br>
   存在しないスタックへの「#TSF_this」例えば「#!exit: #TSF_this」を行った場合もオーバーフロー発生ですが、飛び先ではなく現在のそタックでオーバーフロー、すなわちスタックの終了扱いになります。<br>
   存在しないスタックのpeekや0枚スタックへのpullその他「ドロー」などのアンダーフローでも長さ0の文字列を受けとるだけでエラーは回避されるはずです。<br>
   つまり、プログラムが止まるような構文エラーや演算エラーそのものが発生しない以上、catchする事ができないのでcatch構文もありません。<br>
  </p>
 </section>
 <section>
  <h2 id="grammar-5">①-5．TSFにはfor文やwhile文が無いので再帰がループです。</h2>
  <p>
   thisスタック(実行中)のスタック自身を呼ぶ場合はコールスタックに積まずに再度実行されるので、末尾再帰ループとなります。<br>
   同様にコールスタックに存在するスタック名を呼び出すとその階層までのスタック名が破棄されます(同名スタックはコールスタックに積まない)のでループとなります。<br>
   TSFではコールスタックを直接編集する#関数カードはありません。ループ(再帰)を用いる場合は脱出用の分岐「#!exit:」等もセットで用意してください。<br>
  </p>
 </section>
 <section>
  <h2 id="grammar-6">①-6．TSFにはif/else文やswitch/case文が無いので分岐は式(比較演算子)などを用います。</h2>
  <p>
  単純な分岐なら「0Z~True:~False: #TSF_calc #TSF_this」のような感じで「#TSF_calc」の比較演算子の計算結果にスタック名を選択する荒技があります(「#TSF_RPN」では使用不可)。<br>
  case文の真似をする場合「switch cases: funcs: #TSF_casesQON #TSF_this」のような感じで「#TSF_casesQON」などを用いてスタック名を選択する方法もあります。<br>
  他にも「funcs: [cases:0] #TSF_calc #TSF_peekMthe #TSF_this」のような感じでpeek系の関数を用いてスタック名を選択する方法もあります。<br>
  </p>
 </section>
 <section>
  <h2 id="grammar-7">①-7．スタック代名詞4つの「th」this,that,the,theyとハウリングについて。</h2>
  <dl><dt>thisスタック(実行中スタック)</dt>
  <dd>
   「this」は実行中のスタック。#関数カードであればthatスタックからカードを「ドロー(積み下ろし)」してthatスタックに「リターン(積み上げ)」したりする。<br>
   文字列カードであれば単純にthatスタックに積み上げる。<br>
   thisスタックを数え終わる、もしくは途中でthisスタック目減りなど「オーバーフロー」が発生したらスタックから抜ける。<br>
   「#!exit: #TSF_this」のように存在しないスタックに入る行為でもオーバーフロー扱い。<br>
  </dd></dl>
  <dl><dt>thatスタック(積込先スタック)</dt>
  <dd>
   「that」は積込先スタック。#関数カードの返り値などが積み上げられる。<br>
   thisスタックとthatスタックが同じ場合、文字列カードが無限に積み重なる状況が発生する場合があり、それは「ハウリング」と呼称します。<br>
   ハウリング対策でthisスタック数え上げ上限を「#TSF_countmax」で指定できます。初期値は256です。<br>
  </dd></dl>
  <dl><dt>theスタック(指定スタック)</dt>
  <dd>
   「the」は指定スタック。#関数カードで特定のスタックを指定する場合の代名詞(theは厳密には冠詞だが便宜上代名詞扱い)。<br>
  </dd></dl>
  <dl><dt>theyスタック(スタック名一覧)</dt>
  <dd>
   「they」はスタック名一覧。「デッキ」のスタック名一覧自体をカード束としてスタックの様に扱う場合がある。<br>
   例えば「#TSF_pullNthey」のスタックの消去は"スタックからカードを一枚引き抜く"表現で"デッキからスタックを一束引き抜く"。<br>
  </dd></dl>
 </section>
 <section>
  <h2 id="grammar-8">①-8．カードシャッフル動詞4つの「p」peek,poke,pull,pushとドロー＆リターンについて。</h2>
  <p>
   スタック操作は『4つの「p」』と『4つの「th」』を組み合わせた動作が基本になります (正確にはppppと4thの間に「副詞」が入りますが副詞説明は次項)。<br>
  <p>
  <dl><dt>peek(スタック読込)</dt>
  <dd>
   スタックからカードを読み込む。読込先スタックはそのままに「that」スタックにカードが積まれるのでカードが増殖る形になる。<br>
  </dd></dl>
  <dl><dt>poke(スタック書込)</dt>
  <dd>
   スタックにカードを書き込む。スタックのカードは上書きされるので上書きされたカードが消失する形になる。<br>
  </dd></dl>
  <dl><dt>pull(スタック引抜)</dt>
  <dd>
   スタックからカードを引き抜く。引抜先スタックから「that」スタックにカードが移動する形になる。<br>
  </dd></dl>
  <dl><dt>push(スタック差込)</dt>
  <dd>
   スタックにカードを差し込む。引抜先スタックに「that」スタックからカードが移動する形になる。<br>
  </dd></dl>
  <dl><dt>pullFthat(ドロー)</dt>
  <dd>
   #関数カードがthatスタックの表面(Front)から何枚かカードを積み下ろす(引き抜く)動作と同じです。<br>
  </dd></dl>
  <dl><dt>pushFthat(リターン)</dt>
  <dd>
   #関数カードがthatスタックの表面(Front)に何枚かカードを積み上げる(差し込む)動作と同じです。<br>
  </dd></dl>
 </section>
 <section>
  <h2 id="grammar-9">①-9．カード選択位置の副詞「FNCMVAQIRHL」と数量詞「SDO」ついて。</h2>
  <p>
   ppppと4thの間に入る「副詞」で操作するカードの位置を指示します(未実装な副詞仕様のつもりで説明します)。<br>
   pppp以外でもreplaces、alias、casesなどの動詞で同じような副詞が登場。<br>
   動詞の種類によっては意味をなさない副詞もあるので注意。<br>
  </p>
  <dl><dt>「F」Front(表択カード)</dt>
  <dd>
   表面、一番上(tsv表現では右端なので末尾)に積まれたカードを選択。<br>
  </dd></dl>
  <dl><dt>「N」Number(順択カード)</dt>
  <dd>
   表面、一番上(tsv表現では右端なので末尾)から数えて数値を指定して選択。ゼロから数える。<br>
  </dd></dl>
  <dl><dt>「C」Cycle(周択カード)</dt>
  <dd>
   順択「N」の指定枚数がスタックのカード枚数を上回る(下回る)場合、ゼロから数え直します。いわゆるmod演算子の要領。<br>
  </dd></dl>
  <dl><dt>「M」liMit(囲択カード)</dt>
  <dd>
   順択「N」の指定枚数がスタックのカード枚数を上回る(下回る)場合、max演算子min演算子の組み合わせ(HSPのlimit)、いわゆるmin(max(N,0),len-1)の要領。<br>
  </dd></dl>
  <dl><dt>「V」reVerse(逆択カード)</dt>
  <dd>
   順択「N」と逆順に(底面、一番下、tsv表現では左端先頭から)数えた数値で選択。ゼロから数える。<br>
  </dd></dl>
  <dl><dt>「A」rAndom(乱択カード)</dt>
  <dd>
   スタック内カードをランダムに選択。乱択で使う乱数の定義はTSFでは定めない(実装する言語のリストオブジェクトに同等の機能があれば使う)ので、乱数を別途用意して順択「N」を用いる必要に迫られるケースがごくまれに発生するかも。<br>
  </dd></dl>
  <dl><dt>「Q」eQual(同択カード)</dt>
  <dd>
   枚数指定のような数値ではなく文字列で同じカードを選択。同じカードが何枚あっても一枚にまとめる。<br>
   peekQだと無駄っぽいがpullQだと同じ文字列のカードをまとめて引き抜く的な(予定というか未実装)。<br>
  </dd></dl>
  <dl><dt>「I」In(含択カード)</dt>
  <dd>
   文字列が含まれるで同じカードを選択。カードの枚数は動詞による。<br>
   peekQでも似た名前のカードが複数引き抜きされるので枚数が付加される(予定というか未実装)。<br>
  </dd></dl>
  <dl><dt>「R」Regex(規択カード)</dt>
  <dd>
   正規表現に該当するカードを選択。カードの枚数は動詞による。<br>
   似た名前のカードが複数引き抜きされるので枚数が付加される(予定というか未実装)。<br>
   TSFを実装する言語毎に正規表現の方言が存在しそうな問題。<br>
  </dd></dl>
  <dl><dt>「H」matcHer(似択カード)</dt>
  <dd>
   文字列の一致度が一定数以上のカードを選択。カードの枚数は動詞による。<br>
   Pythonにあったdifflib.SequenceMatcher().ratio()みたいな関数がD言語その他で再現できるか不明なので保留。<br>
   pppp以外、例えば「#TSF_replacesQDN」で可能でも「#TSF_replacesQSN」の時に文字数の組み合わせ爆発懸念。<br>
  </dd></dl>
  <dl><dt>「L」Label(札択カード)</dt>
  <dd>
   文字列の一致度が一定数以上のカードを選択。カードの枚数は動詞による。<br>
   LTSVなどを読み込む場合などに使用。<br>
  </dd></dl>
  <p>
   replaces、alias、casesなどの動詞ではカードなのかスタック名なのか明確もしくは臨機応変するため数量詞が加わります。<br>
  </p>
  <dl><dt>「S」Stack(スタック名)</dt>
  <dd>
   同名のカードが存在しても、スタックを用います。<br>
  </dd></dl>
  <dl><dt>「D」carD(文字列カード)</dt>
  <dd>
   同名のスタックが存在しても、1枚のカード束とみなします。<br>
  </dd></dl>
  <dl><dt>「O」stack Or card(スタック名か文字列カードか臨機応変)</dt>
  <dd>
   スタックが存在すればスタックを用い、スタックが存在しなければスタック名そのものを1枚のカード束とみなします。<br>
  </dd></dl>
 </section>
 <section>
  <h2 id="api-0">②-0．「TSF.d」「TSF.py」のAPI一覧(コマンド一覧含む)。</h2>
   <dl><dt>TSF_sample_help()</dt><dd>「sample_help.tsf」コマンド版「TSF --help」。<br>ファイル名などのパラメーターが無い場合にもコマンド一覧が表示される。<br></dd></dl>
   <dl><dt>TSF_sample_Helloworld()</dt><dd>「sample_helloworld.tsf」コマンド版「TSF --helloworld」。<br>「"Hello world #TSF_echo」のみ。「#TSF_fin.」の省略テストも兼用。<br></dd></dl>
   <dl><dt>TSF_sample_TSFdoc()</dt><dd>「TSFdoc.tsf」コマンド版。</dd></dl>
   <dl><dt>TSF_sample_about()</dt><dd>「sample_aboutTSF.tsf」コマンド版。</dd></dl>
   <dl><dt>TSF_sample_RPN()</dt><dd>「sample_RPN.tsf」コマンド版。</dd></dl>
   <dl><dt>TSF_sample_calc()</dt><dd>「sample_calc.tsf」コマンド版。</dd></dl>
   <dl><dt>TSF_sample_calcJA()</dt><dd>「sample_calcJA.tsf」コマンド版。</dd></dl>
   <dl><dt>TSF_sample_calender()</dt><dd>「sample_calender.tsf」コマンド版。</dd></dl>
   <dl><dt>TSF_sample_FizzBuzz()</dt><dd>「sample_fizzbuzz.tsf」コマンド版。</dd></dl>
   <dl><dt>TSF_sample_99beer()</dt><dd>「sample_99beer.tsf」コマンド版。</dd></dl>
   <dl><dt>TSF_sample_quine()</dt><dd>「sample_quine.tsf」コマンド版。</dd></dl>
 </section>
 <section>
  <h2 id="faq-0">⑪-0．「TSF」のＦＡＱ。</h2>
  <dl><dt>
   Ｑ．ローカル変数とか無いのですか？<br>
  </dt><dd>
   Ａ．そもそもTSFに変数はありませんが、強いて喩えるなら全てグローバル変数みたいなものなので、その場しのぎのネーミングは衝突の恐れです。<br>
   もう少し喩えるなら他のプログラミング言語でも関数名の衝突には気を付けるはずです。TSFでは関数と変数の区別も無いので、マージしたスクリプトから変数を直接呼び出せるメリットと衝突のデメリットが存在します。<br>
  </dd></dl>
 </section>
<section>
 <h2 id="address-0">⑫-0．作者について、例えば連絡先。</h2>
 <p>
  更新情報はGitHubやブログを確認してください。<br>
 </p>
 <dl><dt>ooblog/TSF2KEV(GitHub)</dt><dd><a href="https://github.com/ooblog/TSF2KEV" title="ooblog/TSF2KEV(GitHub)">https://github.com/ooblog/TSF2KEV</a></dd></dl>
 <dl><dt>[TSF] - 大風呂ダ敷</dt><dd><a href="http://d.hatena.ne.jp/ooblog/searchdiary?word=*[TSF]" title="[TSF] - 大風呂ダ敷">http://d.hatena.ne.jp/ooblog/searchdiary?word=*[TSF]</a></dd></dl>
 <dl><dt>[kanedit] - 大風呂ダ敷</dt><dd><a href="http://d.hatena.ne.jp/ooblog/searchdiary?word=*[kanedit]" title="[kanedit] - 大風呂ダ敷">http://d.hatena.ne.jp/ooblog/searchdiary?word=*[kanedit]</a></dd></dl>
</section>

<div class="gotop"><a href="#top">↑Top</a></div>
<footer>
 <p>site generator "<a href="https://github.com/ooblog/TSF2KEV/blob/master/sample/TSFdoc.tsf" title="TSF2KEV/TSFdoc.tsf at master · ooblog/TSF2KEV">TSFdoc.tsf</a>" repository：<a href="https://github.com/ooblog/TSF2KEV" title="ooblog/TSF2KEV: プログラミング言語「TSF_Tab-Separated-Forth」開発中。">https://github.com/ooblog/TSF2KEV</a></p>
 <p class="ooblog">
  #! -- Copyright (c) 2017 ooblog --<br>
  #! License: MIT　<a href="https://github.com/ooblog/TSF2KEV/blob/master/LICENSE" title="TSF2KEV/LICENSE at master · ooblog/TSF2KEV">https://github.com/ooblog/TSF2KEV/blob/master/LICENSE</a><br>
 </p>
</footer>
</body></html>
